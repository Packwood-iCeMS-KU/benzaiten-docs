<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="https://icems-research-computing.github.io/benzaiten-docs/training/gaussian/" rel="canonical"/>
<link href="../../img/favicon.ico" rel="shortcut icon"/>
<title>Gaussian - Benzaiten Cluster Documentation</title>
<link href="../../css/theme.css" rel="stylesheet"/>
<link href="../../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" rel="stylesheet"/>
<link href="../../extra.css" rel="stylesheet"/>
<link href="../../css/neoteroi-mkdocs.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "Gaussian";
        var mkdocs_page_input_path = "training/gaussian.md";
        var mkdocs_page_url = "/benzaiten-docs/training/gaussian/";
      </script>
<!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="../.."> Benzaiten Cluster Documentation
        </a><div role="search">
<form action="../../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../accessing_the_cluster/">Accessing the Cluster</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../basic_commands/">Basic Commands</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../storage/">Storage and Quotas</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../partitions/">Using Partitions</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../running_jobs/">Running Jobs</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../parallel_processing/">Parallel Processing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../managing_jobs/">Managing Jobs</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../solar_vuw/">Connecting to High Capacity Storage</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud_providers/">Connecting to Cloud Providers</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../containers/">Using Containers</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/">Using Jupyter Notebooks</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/">Examples</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../usersub/">User Submitted Docs</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hpclayout/">HPC Hardware Layout</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/">Support</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../..">Benzaiten Cluster Documentation</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Docs" class="icon icon-home" href="../.."></a> »</li>
<li class="breadcrumb-item active">Gaussian</li>
<li class="wy-breadcrumbs-aside">
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h2 id="example-gaussian-job-submission-on-hpc">Example Gaussian Job Submission on HPC<a class="headerlink" href="#example-gaussian-job-submission-on-hpc" title="Permanent link">¶</a></h2>
<p>Here is an example of submitting a Gaussian job on the HPC using Slurm. In this example, we will submit a Gaussian job using the <code>quicktest</code> partition, and request 1 task with 4 CPUs and 7GB of memory for a maximum run time of 1 hour. We will also load the <code>g16</code> module, which is required to run Gaussian on the HPC.</p>
<p>First, create a new directory and navigate to it:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>gaussian_example
<span class="nb">cd</span><span class="w"> </span>gaussian_example
</code></pre></div>
<h3 id="get-the-example-input-file">Get the example input file<a class="headerlink" href="#get-the-example-input-file" title="Permanent link">¶</a></h3>
<p>The <code>test0397.com</code> file is an example input file for Gaussian. It contains instructions for Gaussian to perform a calculation on a molecule.</p>
<p>To run the example job using this input file, you should copy the <code>test0397.com</code> file from the Gaussian installation directory at <code>/home/software/apps/gaussian/g16/tests/com/test0397.com</code> to your working directory (<code>gaussian_example</code> in this case). </p>
<p>To do that from the <code>gaussian_example</code> directory:
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>/home/software/apps/gaussian/g16/tests/com/test0397.com<span class="w"> </span>.<span class="w"> </span><span class="c1"># copy from location to . The dot means current directory</span>
</code></pre></div></p>
<p>Have a look at the first few lines of the input file to see what it does.</p>
<div class="highlight"><pre><span></span><code>head<span class="w"> </span>test0397.com<span class="w">  </span><span class="c1"># the first 5 lines of test0397.com</span>

<span class="c1">#returns</span>
!%nproc<span class="o">=</span><span class="m">4</span>
<span class="c1">#p rb3lyp/3-21g force test scf=novaracc</span>

Gaussian<span class="w"> </span>Test<span class="w"> </span>Job<span class="w"> </span><span class="m">397</span>:
Valinomycin<span class="w"> </span>force

<span class="m">0</span>,1
O,-1.3754834437,-2.5956821046,3.7664927822
O,-0.3728418073,-0.530460483,3.8840401686
O,2.3301890394,0.5231526187,1.7996834334
</code></pre></div>
<p>The first line <code>!%nproc=4</code> specifies the number of processors that Gaussian will use to run the calculation, in this case, 4.</p>
<p>We will need to make sure that the number of processes used in this file matches the number of cpus we request from Slurm</p>
<h3 id="slurm-submission">Slurm Submission<a class="headerlink" href="#slurm-submission" title="Permanent link">¶</a></h3>
<p>Next, create a submission script called <code>submit.sh</code> (using nano or similar) and add the following contents:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/sh</span>
<span class="c1">#SBATCH --job-name=g16-test</span>

<span class="c1"># max run time</span>
<span class="c1">#SBATCH --time=1:00:00</span>
<span class="c1">#SBATCH --partition=quicktest</span>

<span class="c1">#SBATCH --output=_quicktest.out</span>
<span class="c1">#SBATCH --error=_quicktest.err</span>

<span class="c1">#SBATCH --ntasks=1</span>
<span class="c1">#SBATCH --cpus-per-task=4</span>
<span class="c1">#SBATCH --mem=7G</span>

module<span class="w"> </span>load<span class="w"> </span>gaussian/g16

g16<span class="w"> </span>test0397.com
</code></pre></div>
<p>In the submission script, we specify the following:</p>
<ul>
<li><code>--job-name</code>: name of the job to appear in the queue.</li>
<li><code>--time</code>: maximum runtime for the job in <code>hh:mm:ss</code> format.</li>
<li><code>--partition</code>: the partition to run the job on.</li>
<li><code>--output</code>: specifies the name of the standard output file.</li>
<li><code>--error</code>: specifies the name of the standard error file.</li>
<li><code>--ntasks</code>: specifies the number of tasks the job will use.</li>
<li><code>--cpus-per-task</code>: specifies the number of CPUs per task.</li>
<li><code>--mem</code>: specifies the amount of memory to allocate for the job.</li>
</ul>
<p>Submit the job to the queue using <code>sbatch</code>:</p>
<div class="highlight"><pre><span></span><code>sbatch<span class="w"> </span>submit.sh
</code></pre></div>
<p>You can check the status of your job in the queue using <code>squeue</code>:</p>
<div class="highlight"><pre><span></span><code>squeue<span class="w"> </span>-u<span class="w"> </span>&lt;your_username&gt;
</code></pre></div>
<p>Once the job is finished, you can check for the output files and see the contents of the standard output file using <code>cat</code>:</p>
<div class="highlight"><pre><span></span><code>ls
cat<span class="w"> </span>_quicktest.out
</code></pre></div>
<p>The Gaussian output files (test0397.log, test0397.chk, etc.) will also be generated in the working directory. You can view the output file using the less command:</p>
<div class="highlight"><pre><span></span><code>less<span class="w"> </span>test0397.log
</code></pre></div>
<p>Press <code>q</code> to Quit the less program</p>
<p>That's it! You have successfully submitted and run a Gaussian job on a HPC cluster using Slurm.</p>
</div>
</div><footer>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
</span>
</div>
<script src="../../js/jquery-3.6.0.min.js"></script>
<script>var base_url = "../..";</script>
<script src="../../js/theme_extra.js"></script>
<script src="../../js/theme.js"></script>
<script src="https://unpkg.com/mermaid@8.7.0/dist/mermaid.min.js"></script>
<script src="../../search/main.js"></script>
<script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>
</body>
</html>
